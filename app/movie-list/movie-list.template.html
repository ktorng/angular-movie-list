<!-- Top toolbar with search and filter -->
<md-toolbar class="md-tall md-hue-2">
  <span flex></span> <!-- fill up top area -->
  <div md-theme="light-on-dark" class="md-toolbar-tools">
    <span>My Movie List</span>
    <span flex></span> <!-- fill up area between heading and search -->
    <md-input-container>
      <label>Enter full movie title</label>
      <input
        type="text"
        ng-model="$ctrl.search.new"
        ng-keypress="($event.charCode === 13) ? $ctrl.fetchMovie() : 0"
      />
    </md-input-container>
    <md-button class="md-icon-button" aria-label="Search" ng-click="$ctrl.fetchMovie()">
      <ng-md-icon icon="search"></ng-md-icon>
    </md-button>
  </div>
</md-toolbar>

<div flex layout="row">
  <!-- Sidebar content -->
  <md-sidenav
    layout="column"
    class="md-sidenav-left md-whiteframe-z2"
    md-component-id="left"
    md-is-locked-open="$mdMedia('gt-md')"
  >
    <md-input-container>
      <label>Search List</label>
      <input type="text" ng-model="$ctrl.search.list" />
    </md-input-container>

    <p>
      Sort by:
      <select ng-model="$ctrl.orderProp">
        <option value="Title">Title</option>
        <option value="-Released">Newest</option>
        <option value="Released">Oldest</option>
      </select>
    </p>

    <!-- List of movies with rating -->
    <md-list class="movies">
      <md-list-item class="movie-list-item"
          ng-click="$ctrl.details = movie"
          ng-repeat="movie in $ctrl.movies
            | toArray
            | filter:$ctrl.search.list
            | orderBy:$ctrl.orderProp"
      >
        <span>{{movie.myRating ? movie.myRating : 'N/A'}}</span>
        <h4>{{movie.Title}}</h4>
      </li>
    </md-list>
  </md-sidenav>

  <!-- Movie details -->
  <md-content flex class="details">
    <div ng-if="$ctrl.details.Response === 'True'">
      <img
        class="movie-poster"
        ng-src="{{$ctrl.details.Poster === 'N/A'
                  ? 'http://placehold.it/150x220&text=N/A'
                  : $ctrl.details.Poster}}"
      >
      <span class="movie-title">
        <a href="http://imdb.com/title/{{ $ctrl.details.imdbID }}" target="_blank">
          {{$ctrl.details.Title}}
        </a>
      </span> ({{$ctrl.details.Year}})

      <p class="movie-info">
        {{$ctrl.details.Rated}}
        <span>|</span>
        {{$ctrl.details.Genre }}
        <span>|</span>
        {{$ctrl.details.Runtime}}
        <span>|</span>
        {{$ctrl.details.Released}}
      </p>

      <p>{{ $ctrl.details.Plot }}</p>

      <p class="outer-p">
        <div class="inner-p">
          <span class="label label-primary">Director:</span> {{$ctrl.details.Director}}
        </div>
        <div class="inner-p">
          <span class="label label-primary">Writer:</span> {{$ctrl.details.Writer}}
        </div>
        <div class="inner-p">
          <span class="label label-primary">Starring:</span> {{$ctrl.details.Actors}}
        </div>
      </p>

      <p class="outer-p-2">Ratings:
        <br>
        <strong>IMDb Rating</strong>: <span class="label label-success">{{ $ctrl.details.imdbRating }}</span>
        <br>
        <strong>Rotten Tomatoes</strong>: <span class="label label-success">{{ $ctrl.details.tomatoRating }}</span>
      </p>

      <p class="outer-p-3">
        <md-button
          ng-if="!$ctrl.movies[$ctrl.details.Title]"
          ng-click="$ctrl.addMovie()"
          class="md-raised md-primary"
        >
          Add to my List
        </md-button>
        <md-button
          ng-if="$ctrl.movies[$ctrl.details.Title]"
          ng-click="$ctrl.removeMovie()"
          class="md-raised md-primary"
        >
          Remove from my List
        </md-button>
      </p>
    </div>

    <div ng-if="$ctrl.details.Response==='False'">
      No results found.
    </div>
  </md-content>

</div>
